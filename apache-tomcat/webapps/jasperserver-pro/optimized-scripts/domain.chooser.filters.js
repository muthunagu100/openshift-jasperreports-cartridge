dc.preFilters={init:function(){var e=dc.preFilters;dc.submitFormId="preFiltersForm";var t=new domain.FilterModelController("filtersListId",domain.FilterEditor,localContext.rsInitOptions);if(e.fields.init(t,function(){t.init(),t.initDropContainer(["draggable"])}),isSupportsTouch()){var i=document.getElementById("stepDisplayScrollWrapper"),o=document.getElementById("fieldsTreeRoot"),r=document.getElementById("filtersListId");new TouchController(i,i.parentNode,{absolute:!0,scrollbars:!0}),new TouchController(o,o.parentNode),new TouchController(r,r.parentNode)}domain.resetTreeSelectionHandler.init(["#"+e.fields.ITEMS_TREE_DOM_ID],function(){return[e.fields.itemsTree]}),disableSelectionWithoutCursorStyle($(document.body))}},dc.preFilters.fields={ITEMS_TREE_DOM_ID:"fieldsTreeRoot",TREE_DATA_PROVIDER:"semantic-layer-query-tree-data-provider",itemsTree:null,init:function(e,t){var i=dc.preFilters.fields;i.filterModel=e,i.itemsTree=domain.createItemsTree({treeId:i.ITEMS_TREE_DOM_ID,providerId:i.TREE_DATA_PROVIDER,templateDomId:"list_responsive_collapsible_fields",selectOnMousedown:!isIPad(),dragPattern:".leaf .draggable"}),i.itemsTree.showTree(10,function(){i.initTreeEvents(),t()})},initTreeEvents:function(){_.each(this.filterModel.treeEventFactory,function(e,t){this.itemsTree.observe(t,_.bind(e,this.filterModel))},this)}};var dc_filters=dc.preFilters;domain.chooser.FilterEditor=deepClone(domain.FilterEditor.prototype),domain.chooser.FilterEditorPrototype={initTemplate:function(){domain.chooser.FilterEditor.initTemplate.call(this),this.lockStatusElement=this.editorTemplate.down(".editable")},fillinTemplate:function(){this.lockStatusElement.setValue(!!this.getOriginalValue().locked),domain.chooser.FilterEditor.fillinTemplate.call(this)},getValue:function(){var e=domain.chooser.FilterEditor.getValue.call(this);return e.locked=!!this.lockStatusElement.getValue(),e}},Object.extend(domain.FilterEditor.prototype,domain.chooser.FilterEditorPrototype),Object.extend(domain.NumberFilterEditor.prototype,domain.chooser.FilterEditorPrototype),Object.extend(domain.StringFilterEditor.prototype,domain.chooser.FilterEditorPrototype),Object.extend(domain.DateFilterEditor.prototype,domain.chooser.FilterEditorPrototype),Object.extend(domain.BooleanFilterEditor.prototype,domain.chooser.FilterEditorPrototype),domain.FilterModelController.addMethod("addFieldFilter",function(e){var t=e.collect(function(e){return new domain.FilterItem({node:e})}),i=t.first();i.type===t[1].type&&(i.initFieldFilterItem(t[1]),this.addFilter(i))}),"undefined"==typeof require&&document.observe("dom:loaded",dc.initialize.bind(dc));