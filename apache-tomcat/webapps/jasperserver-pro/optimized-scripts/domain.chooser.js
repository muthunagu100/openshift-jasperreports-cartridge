var REPORT_TYPE_PARAM="reportType",REPORT_TYPE_URL_PARAM_PATTERN=new RegExp("[\\?&]"+REPORT_TYPE_PARAM+"=([^&#]*)");domain.chooser={FLOW_ID:"adhocFlow",FIELDS:"dataChooserFields",DISPLAY:"dataChooserDisplay",SAVE_AS_TOPIC:"dataChooserSaveAsTopic",PRE_FILTERS:"dataChooserPreFilters",submitFormId:"stepDisplayForm",currentPage:null,flowExecutionKey:null,unsavedChangesPresent:!1,initialize:function(){var e=REPORT_TYPE_URL_PARAM_PATTERN.exec(location.search);if(this.reportType=null==e?"":decodeURIComponent(e[1].replace(/\+/g," ")),localContext.rsInitOptions){var n=localContext.rsInitOptions;this.currentPage=$(document.body).identify(),this.flowExecutionKey=n.flowExecutionKey,this.unsavedChangesPresent=n.unsavedChangesPresent;var t=this.pageInitFactory[this.currentPage]();this.initModule(t,n),domain.registerClickHandlers([this.getFlowControlsClickEventHandler()])}},initModule:function(e,n){e&&(e.fillForm&&(dc.fillForm=e.fillForm.bind(e)),e.getFlowControlsClickEventHandler&&(dc.getFlowControlsClickEventHandler=e.getFlowControlsClickEventHandler.bind(e)),e.init.bind(e)(n))},fillForm:function(){},getFlowControlsClickEventHandler:function(){return dc.flowControlsClickEventHandler.bind(dc)},flowControlsClickEventHandler:function(e){var n=!1;return this.flowControlsEventMap.each(function(t){if(domain.elementClicked(e,t.key)){if(n=!0,t.value.returnOnPage&&this.currentPage===t.value.returnOnPage)throw $break;if(t.value.confirmLeave&&!this.confirmAndLeave())throw $break;throw delete t.value.returnOnPage,t.value.flowId=this.FLOW_ID,t.value.flowExecutionKey=this.flowExecutionKey,t.value.reportType=this.reportType,__jrsConfigs__.initAdditionalUIComponents||(t.value.decorate="no"),"cancelRedirect"===t.value.eventId&&jQuery(document).trigger("adhocDesigner:cancel"),domain.submitForm(this.submitFormId,t.value,this.fillForm),$break}}.bind(this)),n}};var dc=domain.chooser;dc.confirmAndLeave=function(){return dc.unsavedChangesPresent?confirm(domain.getMessage("exitMessage")):!0},dc.setUnsavedChangesPresent=function(e){dc.unsavedChangesPresent=!!e},dc.isUnsavedChangesPresent=function(){return dc.unsavedChangesPresent},dc.pageInitFactory={dataChooserFields:function(){return dc_fields},dataChooserPreFilters:function(){return dc_filters},dataChooserDisplay:function(){return dc_display},dataChooserSaveAsTopic:function(){return dc_saveAs}},dc.flowControlsEventMap=$H({"#fieldsTab":{returnOnPage:domain.chooser.FIELDS,eventId:"fields"},"#filtersTab":{returnOnPage:domain.chooser.PRE_FILTERS,eventId:"preFilters"},"#displayTab":{returnOnPage:domain.chooser.DISPLAY,eventId:"display"},"#saveTopicTab":{returnOnPage:domain.chooser.SAVE_AS_TOPIC,eventId:"saveAsTopic"},"#goToDesigner":{eventId:"done",reportType:dc.reportType},"#cancel":{eventId:"cancelRedirect",confirmLeave:!0}});