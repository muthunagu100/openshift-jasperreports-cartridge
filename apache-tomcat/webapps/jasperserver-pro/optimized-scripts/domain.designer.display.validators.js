dd_display.deleteViewItemValidator={_DELETE_VIEW_ITEMS_TEMPLATE_ID:"deleteViewItemsConfirmMessage",_VIEW_ITEMS_DETAILS_LINK_ID:"#viewItemsDetails",_DONT_WARN_ID:"dontWarnInCurrentSession",_CREATE_MODE:"createMode",_EDIT_MODE:"editMode",_mode:null,_isDontWarnOfDeleteItems:null,_setDontWarnOfDeleteItems:null,_buildCompositeIdentifier:null,_fieldsInfo:null,init:function(e,i,t,s){dd_display.deleteViewItemValidator._init.bind(dd_display.deleteViewItemValidator)(e,i,t,s)},validate:function(e,i){dd_display.deleteViewItemValidator._validate.bind(dd_display.deleteViewItemValidator)(e,i)},_init:function(e,i,t,s){this._mode=e,this._isDontWarnOfDeleteItems=i,this._setDontWarnOfDeleteItems=t,this._buildCompositeIdentifier=s},_validate:function(e,i){this._onOk.bind(this)(e,i)},_getFieldInfo:function(e){var i=function(e){return e.param.extra.itemId},t=dynamicTree.trees[e.getTreeId()].getRootNode(),s="/"+this._buildCompositeIdentifier(e,"/",i,t),a=e.param.extra.label?e.param.extra.label:e.param.extra.itemId;return a+" "+s+" "+e.param.extra.dataType},_getFieldsInfo:function(e){var i=[];return e.each(function(e){e.param.type===e.Types.Folder.name?i=i.concat(this._getFieldsInfo(e.childs)):i.push(this._getFieldInfo(e))}.bind(this)),i},_onOk:function(e,i){i&&i(e)},_onCancel:function(){},_showAffectedResources:function(e){return domain.elementClicked(e,this._VIEW_ITEMS_DETAILS_LINK_ID)?(domain.detailsDialog.show(this._fieldsInfo),!0):void 0}},dd_display.addViewItemsValidator={init:function(e){dd_display.addViewItemsValidator._init.bind(dd_display.addViewItemsValidator)(e)},validate:function(e,i,t){dd_display.addViewItemsValidator._validate.bind(dd_display.addViewItemsValidator)(e,i,t)},_init:function(e){this._getDataIslandId=e},_validate:function(e,i,t){for(var s="",a=e;""===s&&a.parent;)s=a.param.extra.resourceId,a=a.parent;var n=i.find(function(e){var i=this._getDataIslandId(e,"itemId");return s&&s!==e.CONSTANT_TABLE_ID&&i!==e.CONSTANT_TABLE_ID&&i!==s}.bind(this));n?domain.detailsDialog.show(domain.getMessage("items.fromDifferentDataIslands")):t&&t()}},dd_display.emptySetsValidator={_EMPTY_SETS_TEMPLATE_DOM_ID:"emptySetsConfirmMessage",_EMPTY_SETS_LINK_ID:"#emptySetsDetails",_callback:null,_emptySetUris:null,_emptySetIds:null,_copyMoveController:null,_getTree:null,init:function(e,i){dd_display.emptySetsValidator._init.bind(dd_display.emptySetsValidator)(e,i)},validate:function(e){dd_display.emptySetsValidator._validate.bind(dd_display.emptySetsValidator)(e)},_init:function(e,i){this._getTree=e,this._copyMoveController=i},_validate:function(e){this._callback=e;var i=$H(this._getTree().treeMap).values().findAll(function(e){return e.param.type===e.Types.Folder.name&&e!==this._getTree().getRootNode()&&!e.childs.first()}.bind(this));i&&i.first()?(this._emptySetUris=i.collect(function(e){return e.param.uri}),this._emptySetIds=i.collect(function(e){return e.param.id}),domain.confirmDialog.show(this._EMPTY_SETS_TEMPLATE_DOM_ID,this._onOk.bind(this),this._onCancel.bind(this),this._showAffectedResources.bind(this))):this._callback&&this._callback()},_onOk:function(){dd.deleteNodesFromTreeById(this._emptySetIds,this._getTree(),this._copyMoveController),this._callback&&this._callback()},_onCancel:function(){this._callback&&this._callback()},_showAffectedResources:function(e){return domain.elementClicked(e,this._EMPTY_SETS_LINK_ID)?(domain.detailsDialog.show(this._emptySetUris),!0):void 0}},dd_display.checkDesignValidator={_INVALID_DESIGN_TEMPLATE_DOM_ID:"invalidDesignConfirmMessage",_INVALID_DESIGN_LINK_ID:"#designDetails",_callback:null,_errorMessage:null,_showConfirmation:null,_refreshViewTreeStyle:null,init:function(e){dd_display.checkDesignValidator._init.bind(dd_display.checkDesignValidator)(e)},validate:function(e,i){dd_display.checkDesignValidator._validate.bind(dd_display.checkDesignValidator,e,i)()},_init:function(e){this._refreshViewTreeStyle=e},_validate:function(e,i){this._callback=i,this._showConfirmation=e,dd_display.emptySetsValidator.validate(this._emptySetsCallback.bind(this))},_emptySetsCallback:function(){dd.checkDesign.bind(dd,this._checkDesignCallback.bind(this))()},_checkDesignCallback:function(e){if("success"===e)this._refreshViewTreeStyle(),this._callback?this._callback():dialogs.systemConfirm.show(domain.getMessage("designIsValid"));else{this._errorMessage=e.errorMessage,this._refreshViewTreeStyle(e.presentationObjectIds);var i=domainUtil.getUsedResourcesList(e.errorMessage,domain._messages.ITEM_BEING_USED_BY_RESOURCE),t=i.length||domainUtil.indexOfNoAccessMessage(e.errorMessage,domain._messages.resourcesWithNoAccess)>-1?domainUtil.getUsedResourcesFormattedMessage(i,e.errorMessage,{"resource.label":domain._messages["resource.label"],"field.label":domain._messages["field.label"],ITEM_BEING_USED_BY_RESOURCE:domain._messages.ITEM_BEING_USED_BY_RESOURCE,resourcesWithNoAccess:domain._messages.resourcesWithNoAccess}):this._errorMessage;this._showConfirmation&&(i.length||domainUtil.indexOfNoAccessMessage(e.errorMessage,domain._messages.resourcesWithNoAccess)>-1)?domain.confirmDialog.show(this._INVALID_DESIGN_TEMPLATE_DOM_ID,this._onOk.bind(this),this._onCancel.bind(this),_.bind(function(e){this._showAffectedResources(e,t)},this),domain.confirmDialog.MODE_YES_NO):domain.detailsDialog.show(t)}},_onOk:function(){this._callback&&this._callback()},_onCancel:function(){},_showAffectedResources:function(e,i){return domain.elementClicked(e,this._INVALID_DESIGN_LINK_ID)?(domain.detailsDialog.show(i),!0):void 0}};