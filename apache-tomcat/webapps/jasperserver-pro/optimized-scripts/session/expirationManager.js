define(["require","jquery","common/util/classUtil","settings!request","common/transport/request","common/util/datetime/Time","bundle!CommonBundle"],function(e){var t=e("jquery"),n=(e("common/util/classUtil"),e("settings!request")),o=e("common/transport/request"),r=e("common/util/datetime/Time"),i=e("bundle!CommonBundle"),u="hh:mm:ss",s=1e3,m=120*s,a=n.maxInactiveInterval*s;return function(e){function c(){f&&clearTimeout(f),f=setTimeout(function(){var e=l();e&&o({url:n.contextPath+"/rest_v2/resources/"})},g)}function l(){var e=new Date((new Date).getTime()+q),t=new r(e.getHours(),e.getMinutes(),e.getSeconds());return confirm(i["session.expiration.warning"]+" "+t.format(u))}if(e)var d=e.timeoutWarningDelay*s||m;var f,g=a>d?a-d:a/2,q=a>d?d:a/2,v=t(window.document);return v.on("request:before",c),v.on("request:success",c),{handle:c,showWarning:l}}});