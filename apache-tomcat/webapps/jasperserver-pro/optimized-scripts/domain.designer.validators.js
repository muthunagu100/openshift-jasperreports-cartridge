dd.checkDesignValidator={_INVALID_DESIGN_TEMPLATE_DOM_ID:"invalidDesignConfirmMessage",_INVALID_DESIGN_LINK_ID:"#designDetails",_DONE_BUTTON_ID:"done",_callback:null,_errorMessage:null,_showConfirmation:null,validate:function(e,i){dd.checkDesignValidator._validate.bind(dd.checkDesignValidator,e,i)()},_validate:function(e,i){this._callback=i,this._showConfirmation=e,dd.emptySetsValidator.validate(this._emptySetsCallback.bind(this))},_emptySetsCallback:function(e){"empty"===e&&domain.enableButton(this._DONE_BUTTON_ID,!1),dd.checkDesign.bind(dd,this._checkDesignCallback.bind(this))()},_checkDesignCallback:function(e){if("success"===e)this._callback?this._callback():dialogs.systemConfirm.show(domain.getMessage("designIsValid"));else{this._errorMessage=e.errorMessage;var i=domainUtil.getUsedResourcesList(e.errorMessage,domain._messages.ITEM_BEING_USED_BY_RESOURCE),s=i.length||domainUtil.indexOfNoAccessMessage(e.errorMessage,domain._messages.resourcesWithNoAccess)>-1?domainUtil.getUsedResourcesFormattedMessage(i,e.errorMessage,{"resource.label":domain._messages["resource.label"],"field.label":domain._messages["field.label"],ITEM_BEING_USED_BY_RESOURCE:domain._messages.ITEM_BEING_USED_BY_RESOURCE,resourcesWithNoAccess:domain._messages.resourcesWithNoAccess}):this._errorMessage;this._showConfirmation&&(i.length||domainUtil.indexOfNoAccessMessage(e.errorMessage,domain._messages.resourcesWithNoAccess)>-1)?domain.confirmDialog.show(this._INVALID_DESIGN_TEMPLATE_DOM_ID,this._onOk.bind(this),this._onCancel.bind(this),_.bind(function(e){this._showAffectedResources(e,s)},this),domain.confirmDialog.MODE_YES_NO):domain.detailsDialog.show(s)}},_onOk:function(){this._callback&&this._callback()},_onCancel:function(){},_showAffectedResources:function(e,i){return domain.elementClicked(e,this._INVALID_DESIGN_LINK_ID)?(domain.detailsDialog.show(i),!0):void 0}},dd.emptySetsValidator={_EMPTY_SETS_TEMPLATE_DOM_ID:"emptySetsConfirmMessage",_EMPTY_SETS_LINK_ID:"#emptySetsDetails",_callback:null,_emptySets:null,validate:function(e){dd.emptySetsValidator._validate.bind(dd.emptySetsValidator,e)()},_validate:function(e){this._callback=e,dd.checkForEmptySets.bind(dd,this._checkCallback.bind(this))()},_checkCallback:function(e){e&&e.first()?(this._emptySets=e,domain.confirmDialog.show(this._EMPTY_SETS_TEMPLATE_DOM_ID,this._onOk.bind(this),this._onCancel.bind(this),this._showAffectedResources.bind(this))):this._callback&&this._callback()},_onOk:function(){dd.deleteEmptySets.bind(dd,this._emptySets,this._callback)()},_onCancel:function(){this._callback&&this._callback()},_showAffectedResources:function(e){return domain.elementClicked(e,this._EMPTY_SETS_LINK_ID)?(domain.detailsDialog.show(this._emptySets),!0):void 0}},dd.exportSchemaValidator={_EXPORT_SCHEMA_PREFIXES_TEMPLATE_DOM_ID:"exportSchemaPrefixesConfirmMessage",_callback:null,validate:function(e){dd.exportSchemaValidator._validate.bind(dd.exportSchemaValidator,e)()},_validate:function(e){this._callback=e,dd.getCheckDesignValidator().validate(!0,this._checkDesignValidatorCallback.bind(this))},_checkDesignValidatorCallback:function(){dd.hasSchemas?domain.confirmDialog.show(this._EXPORT_SCHEMA_PREFIXES_TEMPLATE_DOM_ID,this._onOk.bind(this),this._onCancel.bind(this),null,domain.confirmDialog.MODE_YES_NO):this._callback&&this._callback()},_onOk:function(){this._callback&&this._callback(!0)},_onCancel:function(){this._callback&&this._callback(!1)}},dd.exportBundlesValidator={_EXPORT_BUNDLES_TEMPLATE_DOM_ID:"exportBundlesConfirmMessage",_GENERATE_LABEL_KEYS_PATTERN:"#autoGenerateLabelKeys",_GENERATE_LABEL_KEYS_ID:"generateLabelKeys",_GENERATE_DESCR_KEYS_PATTENR:"#autoGenerateDescriptionKeys",_GENERATE_DESCR_KEYS_ID:"generateDescriptionKeys",_callback:null,_generateLabelKeys:!1,_generateDescrKeys:!1,validate:function(e){dd.exportBundlesValidator._validate.bind(dd.exportBundlesValidator,e)()},_validate:function(e){this._callback=e,dd.getCheckDesignValidator().validate(!0,this._checkDesignValidatorCallback.bind(this))},_checkDesignValidatorCallback:function(){domain.confirmDialog.show(this._EXPORT_BUNDLES_TEMPLATE_DOM_ID,this._onOk.bind(this),this._onCancel.bind(this),this._handleCheckBoxes.bind(this))},_onOk:function(){this._callback&&this._callback(this._generateDescrKeys,this._generateLabelKeys)},_onCancel:function(){},_handleCheckBoxes:function(e){return matchMeOrUp($(e),this._GENERATE_LABEL_KEYS_PATTERN)?(this._generateLabelKeys=$F(this._GENERATE_LABEL_KEYS_ID),domain.PROPAGATE_EVENT):matchMeOrUp($(e),this._GENERATE_DESCR_KEYS_PATTENR)?(this._generateDescrKeys=$F(this._GENERATE_DESCR_KEYS_ID),domain.PROPAGATE_EVENT):void 0}},dd.deleteCalcFieldsValidator={_DELETE_CALCFIELDS_TEMPLATE_ID:"calcFieldsConfirmMessage",_CALC_FIELDS_DETAILS_LINK_ID:"#calcFieldsDetails",_involvedFieldsIds:null,_involvedFieldsExpressionIds:null,_nodes:null,_callback:null,_validateForCalcFields:null,init:function(e){dd.deleteCalcFieldsValidator._init.bind(dd.deleteCalcFieldsValidator,e)()},validate:function(e,i,s){dd.deleteCalcFieldsValidator._validate.bind(dd.deleteCalcFieldsValidator,e,i,s)()},_init:function(e){this._validateForCalcFields=e},_validate:function(e,i,s){this._nodes=e,this._callback=s;var t=Object.toJSON(e.collect(function(e){return e.param.extra.datasourceId+"."+e.param.extra.itemId}));this._validateForCalcFields(t,i,this._validationCallback.bind(this))},_validationCallback:function(e){this._involvedFieldsIds=[],this._involvedFieldsExpressionIds=[],"success"===e?this._onOk():(this._involvedFieldsIds=e.involvedFieldsIds,this._involvedFieldsExpressionIds=e.involvedFieldsExpressionIds,domain.confirmDialog.show(this._DELETE_CALCFIELDS_TEMPLATE_ID,this._onOk.bind(this),this._onCancel.bind(this),this._showAffectedResources.bind(this)))},_onOk:function(){this._callback&&this._callback(this._involvedFieldsIds,this._involvedFieldsExpressionIds)},_onCancel:function(){},_showAffectedResources:function(e){return domain.elementClicked(e,this._CALC_FIELDS_DETAILS_LINK_ID)?(domain.detailsDialog.show(this._involvedFieldsExpressionIds),!0):void 0}},dd.deleteFiltersValidator={_DELETE_FILTERS_TEMPLATE_ID:"deleteFiltersConfirmMessage",_FILTER_DETAILS_LINK_ID:"#filtersDetails",_tablesAffectedInFilters:null,_nodes:null,_callback:null,_getTablesUsedForFilters:null,init:function(e){dd.deleteFiltersValidator._init.bind(dd.deleteFiltersValidator,e)()},validate:function(e,i){dd.deleteFiltersValidator._validate.bind(dd.deleteFiltersValidator,e,i)()},_init:function(e){this._getTablesUsedForFilters=e},_validate:function(e,i){this._callback=i,this._tablesAffectedInFilters=this._getTablesUsedForFilters(e),this._tablesAffectedInFilters.first()?domain.confirmDialog.show(this._DELETE_FILTERS_TEMPLATE_ID,this._onOk.bind(this),this._onCancel.bind(this),this._showAffectedResources.bind(this)):this._onOk()},_onOk:function(){this._callback&&this._callback()},_onCancel:function(){},_showAffectedResources:function(e){return domain.elementClicked(e,this._FILTER_DETAILS_LINK_ID)?(domain.detailsDialog.show(this._tablesAffectedInFilters),!0):void 0}},dd.calcFieldsAndFiltersValidator={init:function(e,i){dd.deleteCalcFieldsValidator.init(e),dd.deleteFiltersValidator.init(i)},validate:function(e,i,s){dd.deleteCalcFieldsValidator.validate(e,i,dd.calcFieldsAndFiltersValidator._deleteCalcFieldsCallback.bind(dd.calcFieldsAndFiltersValidator,s,e))},_deleteCalcFieldsCallback:function(e,i,s,t){dd.deleteFiltersValidator.validate(i,this._deleteFiltersCallback.bind(this,e,s,t))},_deleteFiltersCallback:function(e,i,s){e&&e(i,s)}};