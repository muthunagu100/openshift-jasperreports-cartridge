!function(e,n,t){function r(e,t){var r=function(t){return"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)?{report:function(t){return function(r){e.report(n.extend({container:t},r))}}(t)}:void 0};return r.logout=t.logout,r.login=t.login,n.extend(r,e),r}var i="0.0.1a",o={bis:{},auths:[],facts:{},config:{}};o.auths.find=function(e,t){return n.find(this,n.compose(n.partial(n.isEqual,n.extend({url:e},t)),function(e){return e.properties()}))};var s=function(e,i,s,u){var a,c,l,f,v;"function"==typeof e?(a=o.config,l=e,f=i,v=s):(a=n.extend({},o.config,e),l=i,f=s,v=u),c=o.bis[a.server],c||(c=t({url:a.server,scripts:a.scripts,logEnabled:a.logEnabled,logLevel:a.logLevel}),o.bis[a.server]=c),c(["bi/component/factory/BiComponentFactory","bi/component/Authentication"],function(e,t){var i=o.auths.find(a.server,a.auth),s=o.facts[a.server];i||(i=new t(n.extend({url:a.server},a.auth)),o.auths.push(i)),s||(s=new e({server:a.server}),o.facts[a.server]=s),i._result||(i._result=i.run()),i._result.fail(f).always(function(e){if("resolved"===i._result.state()){var n=r(s,i);l&&l(n),v&&v(null,n)}else v&&v(e)})})};s.version=i,s.config=function(e){n.extend(o.config,e)};var u=e.visualize;s.noConflict=function(){return e.visualize===s&&(e.visualize=u),s},e.visualize=s}(this,_,jasper);