AdHocTable.createDraggableColumn=function(e){return new Draggable(e,{mouseOffset:!0,scroll:"mainTableContainer",onStart:function(e){if(selObjects.length){Draggables.dragging=designerBase.COLUMN_LEVEL,$(e.element).addClassName(layoutModule.DRAGGING_CLASS),AdHocTable.draggingColumnOverlay=!0;var a=selObjects.length;$(e.element).update(a-1?a+" "+itemsSelectedSuffix:selObjects[0].header.getAttribute("data-label"))}},onEnd:function(e){Draggables.dragging=null,AdHocTable.draggingColumnOverlay=!1;var a=$(e.element).identify(),n=AdHocTable.digitRegex.exec(a)[0];if(-1==AdHocTable.draggingMoveOverColumnIndex)isDesignView&&AdHocTable.removeColumn();else if(n!=AdHocTable.draggingMoveOverColumnIndex){var r=n<AdHocTable.draggingMoveOverColumnIndex?[].max:[].min,l=r.call(selObjects,function(e){return e.index});localContext.moveColumn(l,AdHocTable.draggingMoveOverColumnIndex)}else AdHocTable.initOverlays();AdHocTable.draggingMoveOverColumnIndex=-1}})},AdHocTable.createDraggableGroup=function(e){return new Draggable(e,{constraint:"vertical",ghosting:!0,mouseOffset:!0,onStart:function(e){selObjects.length&&(Draggables.dragging=designerBase.GROUP_LEVEL,$(e.element).addClassName(layoutModule.DRAGGING_CLASS),AdHocTable.draggingGroupOverlay=!0,$(e.element).update(selObjects[0].label))},onEnd:function(){Draggables.dragging=null,AdHocTable.draggingGroupOverlay=!1;var e=selObjects[0].index;-1==AdHocTable.draggingMoveOverGroupIndex?isDesignView&&AdHocTable.removeGroup():e!=AdHocTable.draggingMoveOverGroupIndex?localContext.moveGroup(e,AdHocTable.draggingMoveOverGroupIndex):AdHocTable.initOverlays(),AdHocTable.draggingMoveOverGroupIndex=-1}})},AdHocTable.updateColumnWhileDrag=function(e,a,n){var r,l,o="dimensionsTree"==Draggables.dragging||"measuresTree"==Draggables.dragging||Draggables.dragging==designerBase.COLUMN_LEVEL,g=matchAny(a,[adhocDesigner.COLUMN_OVERLAY_PATTERN,adhocDesigner.COLUMN_SIZER_PATTERN]);if(g)if(o){r=a.identify(),l=AdHocTable.digitRegex.exec(r)[0],AdHocTable.draggingMoveOverColumnIndex=l;var i=!0;("dimensionsTree"==Draggables.dragging||"measuresTree"==Draggables.dragging)&&(i=AdHocTable.isHoverGreaterThan50Percent(e,l)),n(parseInt(l),i)}else!AdHocTable.draggingColumnSizer&&a.match(adhocDesigner.COLUMN_OVERLAY_PATTERN)&&a.addClassName("over");!o||g||a.match(adhocDesigner.COLUMN_SIZER_PATTERN)||(AdHocTable.draggingMoveOverColumnIndex=-1)},AdHocTable.isHoverGreaterThan50Percent=function(e,a){var n=AdHocTable.theCols[a];if(n){var r=0;if(isWebKitEngine()){var l=localContext._getTableHeaders()[a];r=l.getWidth(),n=l}else r=n.getWidth();var o=$(n).cumulativeOffset(),g=n.cumulativeScrollOffset(),i=o[0]+g[0],d=e.pointerX(),t=d-i;return t/r*100>=50}return!1},AdHocTable.activateVisualDropCue=function(e,a){var n=$("columnSizer_"+a);AdHocTable.activateColumnSizer(n)},AdHocTable.deactivateVisualDropCue=function(e,a){var n=$("columnSizer_"+a);AdHocTable.deactivateColumnSizer(n)},AdHocTable.activateColumnSizer=function(e){e&&$(e).addClassName("over")},AdHocTable.deactivateColumnSizer=function(e){e&&$(e).removeClassName("over")};