define(["require","backbone","underscore","bundle!AdHocFiltersBundle","text!adhoc/filter/editor/template/complexExpressionTemplate.htm"],function(e){var t=e("backbone"),i=e("underscore"),o=e("bundle!AdHocFiltersBundle"),n=e("text!adhoc/filter/editor/template/complexExpressionTemplate.htm");return t.View.extend({events:{"change input":"onExpressionChange","click .header .button.disclosure":"onToggleFilter"},template:i.template(n),initialize:function(){this.listenTo(this.model,"change:complexExpression",this.updateComplexExpression),this.listenTo(this.model,"change:filterPodMinimized",this.drawToggleFilter)},onToggleFilter:function(){this.model.set("filterPodMinimized",!this.model.get("filterPodMinimized")),this.model.trigger("toggle",this.model)},drawToggleFilter:function(){this.$(".expression.panel")[this.model.get("filterPodMinimized")?"addClass":"removeClass"]("minimized")},render:function(){this.$el.empty();var e=this.model.toJSON();return e.i18n=o,this.$el.html(this.template(e)),this},onExpressionChange:function(){this.model.set("complexExpression",this.$("input").val())},updateComplexExpression:function(){this.$("input").val(this.model.get("complexExpression"))}})});