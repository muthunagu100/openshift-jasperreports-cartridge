define(["require","backbone","underscore","common/util/parse/number","common/util/parse/date","common/util/parse/time","jrs.configs","adhoc/filter/validation/ValidationError","adhoc/filter/validation/validationMessageCodes","backbone.validation"],function(e){var n=e("backbone"),i=e("underscore"),r=e("common/util/parse/number"),t=e("common/util/parse/date"),a=e("common/util/parse/time"),o=e("jrs.configs"),u=e("adhoc/filter/validation/ValidationError"),l=e("adhoc/filter/validation/validationMessageCodes");e("backbone.validation");var s=u.ATTRIBUTE_INDEX_SEPARATOR,d=o.inputControlsConstants&&o.inputControlsConstants.NULL_SUBSTITUTION_VALUE?o.inputControlsConstants.NULL_SUBSTITUTION_VALUE.toLowerCase():"~null~",A="~BLANK~",g=function(e){return!(i.isNull(e)||i.isUndefined(e)||i.isString(e)&&""===e)},I=function(e,r,t,a,o){for(var u=[],l=0;l<e.length;l++){var d=void 0;for(var A in o)if(d=n.Validation.validators[A](e[l],r+s+(l+1),o[A],a),!i.isUndefined(d))break;u.push(d)}return i.reject(u,function(e){return i.isUndefined(e)})};return i.extend(n.Validation.validators,{required:function(e,n,r,t,a){var o=i.isFunction(r)?r.call(t,e,n,a):r;return o||g(e)?o&&!g(e)?new u(e,n,l.REQUIRED,"required"):void 0:!1},integer:function(e,n){return r.isInt(e)?void 0:new u(e,n,l.INVALID_INTEGER,"integer")},integerRange:function(e,n,t,a){if(!i.isArray(e)||2!==e.length)return new u(e,n,l.INVALID_RANGE,"integerRange");var o=I(e,n,!0,a,{required:!0,nullable:!1,integer:!0});if(o.length)return o;var s=r.parseNumber(e[0]),d=r.parseNumber(e[1]);return s>d?new u(e,n,l.START_BIGGER_THAN_END,"integerRange"):void 0},listWithTrueAll:function(e,n,r,t,a){return i.isArray(e)&&e.length>0||a.isAnyValue===!0?void 0:new u(e,n,l.INVALID_TRUE_ALL_LIST,"listWithTrueAll")},list:function(e,n){return i.isArray(e)?void 0:new u(e,n,l.INVALID_LIST,"list")},decimal:function(e,n){return r.isDecimal(e)?void 0:new u(e,n,l.INVALID_DECIMAL,"decimal")},decimalRange:function(e,n,t,a){if(!i.isArray(e)||2!==e.length)return new u(e,n,l.INVALID_RANGE,"decimalRange");var o=I(e,n,t,a,{required:!0,nullable:!1,decimal:!0});if(o.length)return o;var s=r.parseNumber(e[0]),d=r.parseNumber(e[1]);return s>d?new u(e,n,l.START_BIGGER_THAN_END,"decimalRange"):void 0},"long":function(e,n){return r.isInt(e)?void 0:new u(e,n,l.INVALID_LONG,"long")},longRange:function(e,n,t,a){if(!i.isArray(e)||2!==e.length)return new u(e,n,l.INVALID_RANGE,"longRange");var o=I(e,n,t,a,{required:!0,nullable:!1,"long":!0});if(o.length)return o;var s=r.parseNumber(e[0]),d=r.parseNumber(e[1]);if(s!==!1&&d!==!1)return s>d?new u(e,n,l.START_BIGGER_THAN_END,"longRange"):void 0},string:function(e,n){return i.isString(e)?void 0:new u(e,n,l.INVALID_STRING,"string")},nullable:function(e,n,r){return r===!0&&i.isString(e)&&d===e.toLowerCase()?!1:r===!1&&i.isString(e)&&d===e.toLowerCase()?new u(e,n,l.NOT_NULLABLE,"nullable"):void 0},stringRange:function(e,n,r,t){if(!i.isArray(e)||2!==e.length)return new u(e,n,l.INVALID_RANGE,"stringRange");var a=I(e,n,r,t,{required:!0,string:!0,nullable:!1});return a.length?a:void 0},date:function(e,n){return t.isDate(e)||t.isRelativeDate(e)?void 0:new u(e,n,l.INVALID_DATE,"date")},dateRange:function(e,n,r,a){if(!i.isArray(e)||2!==e.length)return new u(e,n,l.INVALID_RANGE,"dateRange");var o=I(e,n,r,a,{required:!0,nullable:!1,date:!0});if(o.length)return o;var s=t.compareDates(e[0],e[1]);return"undefined"!=typeof s&&s>0?new u(e,n,l.START_DATE_LATER_THAN_FINISH,"dateRange"):void 0},timestamp:function(e,n){return t.isTimestamp(e)||t.isRelativeTimestamp(e)?void 0:new u(e,n,l.INVALID_TIMESTAMP,"timestamp")},timestampRange:function(e,n,r,a){if(!i.isArray(e)||2!==e.length)return new u(e,n,l.INVALID_RANGE,"timestampRange");var o=I(e,n,r,a,{required:!0,nullable:!1,timestamp:!0});if(o.length)return o;var s=t.compareTimestamps(e[0],e[1]);return"undefined"!=typeof s&&s>0?new u(e,n,l.START_DATE_LATER_THAN_FINISH,"timestampRange"):void 0},time:function(e,n){return a.isTime(e)?void 0:new u(e,n,l.INVALID_TIME,"time")},timeRange:function(e,n,r,t){if(!i.isArray(e)||2!==e.length)return new u(e,n,l.INVALID_RANGE,"timeRange");var o=I(e,n,r,t,{required:!0,nullable:!1,time:!0});if(o.length)return o;var s=a.compareTimes(e[0],e[1]);return"undefined"!=typeof s&&s>0?new u(e,n,l.START_TIME_LATER_THAN_FINISH,"timeRange"):void 0},"boolean":function(e,n){return i.isBoolean(e)||i.isString(e)&&i.include(["true","false"],e.toLowerCase())?void 0:new u(e,n,l.INVALID_BOOLEAN,"boolean")},blank:function(e,n,i){return i===!0&&e===A?!1:i===!1&&e===A?new u(e,n,l.NOT_BLANK,"blank"):void 0}}),n.Validation});