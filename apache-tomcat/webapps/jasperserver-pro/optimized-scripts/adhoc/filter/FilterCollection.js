define(["require","backbone","adhoc/filter/FilterModel","underscore"],function(e){var t=e("backbone"),i=e("adhoc/filter/FilterModel"),r=e("underscore");return t.Collection.extend({model:i,addFromField:function(e){return this.add(this.createFilter(e))},createFilter:function(e){return new this.model({filterDataType:e.type,id:e.name,label:e.defaultDisplayName,operatorName:"equals",filterLetter:this.nextLetter(),value:"",state:{value:""}})},initialize:function(e,t){this.service=t.service,this.isOlap=t.isOlap},set:function(e,i){return i=i||{},r.extend(i,{service:this.service,isOlap:this.isOlap}),t.Collection.prototype.set.call(this,e,i)},nextLetter:function(){return this.length>0?this.incLetter(this.at(this.length-1).get("filterLetter")):"A"},incLetter:function(e){return r.isEmpty(e)?e:String.fromCharCode(e.charCodeAt(0)+1)},editableFilters:function(){return this.filter(function(e){return e.get("editable")})},toExpression:function(){return r(this.editableFilters()).map(function(e){return{filterId:e.get("id"),filterExpression:e.toExpression()}})}})});