AdHocChart.showChartMenu=function(e,t){isIPad()?adhocDesigner.showDynamicMenu(e,t,{menuLeft:e.changedTouches[0].clientX,menuTop:e.changedTouches[0].clientY-100}):adhocDesigner.showDynamicMenu(e,t,{menuLeft:e.clientX,menuTop:e.clientY-100})},AdHocChart.getCurrentMeasure=function(){if(1==localContext.state.numberOfMeasures||AdHocChart.isPie())return 0;var e=designerBase.getSelectedObject(),t=e.index;return isNaN(t)?-1:parseInt(t)},AdHocChart.addFieldAsMeasure=function(e,t){var a="";if(_.isNumber(t)||(t=AdHocChart.hoverLegendIndex),selObjects.length>0){var r=adhocDesigner.getSelectedTreeNodes();a=adhocDesigner.collectFields(r,e),AdHocChart.supportsSeries()?_.isNumber(t)&&t>-1?AdHocChart.addAsMeasure(a,t):AdHocChart.addAsLastMeasure(a):AdHocChart.replaceMeasure(a)}},AdHocChart.addFieldAsGroup=function(){var e=designerBase.getSelectedObject();if(e){var t=adhocDesigner.getNameForSelected(e);AdHocChart.setGroup(t)}},AdHocChart.functionSelected=function(e,t){t||(t=AdHocChart.getCurrentMeasure());var a=AdHocChart.getUpdatedMeasureType(e);a?AdHocChart.setSummaryFunctionAndMask(e,defaultMasks[a],t):AdHocChart.setSummaryFunction(e,t)},AdHocChart.getUpdatedMeasureType=function(e){var t=localContext.getMeasureType(e);return t!=localContext.state.dataTypes[AdHocChart.getCurrentMeasure()]?t:null},AdHocChart.getMeasureType=function(e){return"Count"==e||"DistinctCount"==e?"int":localContext.state.dataTypes[AdHocChart.getCurrentMeasure()]},AdHocChart.maskSelected=function(e,t){t||(t=AdHocChart.getCurrentMeasure()),AdHocChart.setMask(e,t)},AdHocChart.deselectAllSelectedOverlays=function(){var e=$$(adhocDesigner.LEGEND_OVERLAY_PATTERN);e.each(function(e){$(e)&&(buttonManager.unSelect($(e)),isIPad()&&($(e).removeClassName(layoutModule.HOVERED_CLASS),$(e).removeClassName(layoutModule.PRESSED_CLASS)))})},AdHocChart.getNewChartPositionAndMove=function(){var e=$("chartBorder"),t=null,a=null,r=null,o=null,c=!1;if(e){if(r=e.positionedOffset(),o=e.cumulativeScrollOffset(),AdHocChart.isContentPageSize())t=r[0]+o[0],a=r[1]+o[1],0>t&&(t=0),a<getTitleBottom()&&(a=getTitleBottom());else{var n=r[0]+getChartWidth(),d=r[1]+getChartHeight();n>localContext.state.availableChartWidth?(t=localContext.state.availableChartWidth-getChartWidth(),t+=o[0],c=!0):t=r[0]+o[0],d>localContext.state.availableChartHeight?(a=localContext.state.availableChartHeight-getChartHeight(),a+=o[1],c=!0):a=r[1]<0?getTitleBottom():r[1]+o[1],0>t&&(t=0),a<getTitleBottom()&&(a=getTitleBottom()),c&&moveTo(e,t,a,null)}moveChart(t,a)}},AdHocChart.computeDimensions=function(e,t){var a=null,r=null,o=$("chartBorder"),c=null;return o&&(a=isNaN(e)?parseInt(o.getStyle("width")):e,r=isNaN(t)?parseInt(o.getStyle("height")):t,AdHocChart.isContentPageSize()||(a>AdHocChart.state.availableChartWidth-AdHocChart.state.chartX&&(a=AdHocChart.state.availableChartWidth-AdHocChart.state.chartX),r>AdHocChart.state.availableChartHeight-AdHocChart.state.chartY&&(r=AdHocChart.state.availableChartHeight-AdHocChart.state.chartY)),a=a<AdHocChart.MIN_CHART_WIDTH?AdHocChart.MIN_CHART_WIDTH:a,r=r<AdHocChart.MIN_CHART_HEIGHT?AdHocChart.MIN_CHART_HEIGHT:r,c=[a,r]),c};