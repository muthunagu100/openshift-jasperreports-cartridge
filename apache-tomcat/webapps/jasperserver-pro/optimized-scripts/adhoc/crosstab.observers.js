AdHocCrosstab.mouseDownHandler=function(){},AdHocCrosstab.mouseUpHandler=function(e){var t,s,o,a=e.element(),r=(new RegExp("\\d+$"),null);if(Draggables.dragging!=designerBase.AVAILABLE_FIELDS_AREA){if(matchAny(a,[localContext.GROUP_LEVEL_DISCLOSURE_PATTERN],!1)){var n=a.up();if(n){var i=n.readAttribute("data-dimension"),d=n.readAttribute("data-level"),l=a.hasClassName("closed");o=n.identify().startsWith("rowGroup"),l?AdHocCrosstab.expandLevel(i,d,o):AdHocCrosstab.collapseLevel(i,d,o)}return}if(matchAny(a,[localContext.GROUP_MEMBER_DISCLOSURE_PATTERN],!1)){if(n=a.up(),$(n)){t=n.identify(),o=t.startsWith("rowGroup_");var c=new RegExp(/\B\d+\B/);s=c.exec(t)[0];var E=$(n).readAttribute("data-path");o?localContext.toggleExpandCollapseForRow(E,s):localContext.toggleExpandCollapseForColumn(E,s)}return}if(r=matchAny(a,[localContext.COLUMN_GROUP_MEMBER_PATTERN,localContext.ROW_GROUP_MEMBER_PATTERN],!0),r&&!isRightClick(e)&&(AdHocCrosstab.deselectAllSelectedOverlays(),crossTabMultiSelect.selectXtabGroupMember(r,e)),r=matchAny(a,[localContext.ROW_GROUP_OVERFLOW_PATTERN,localContext.COLGROUP_GROUP_OVERFLOW_PATTERN],!0))if($(r).hasClassName("colOverflow")){var u=$(r).readAttribute("data-canShowMore");"true"===u&&AdHocCrosstab.retrieveOverflowColumnGroups()}else AdHocCrosstab.retrieveOverflowRowGroups()}},AdHocCrosstab.mouseOverHandler=function(){},AdHocCrosstab.mouseOutHandler=function(){},AdHocCrosstab.mouseClickHandler=function(e){var t=null,s=e.element(),o=new RegExp("\\d+","g");if(s.match(AdHocCrosstab.DRILL_THROUGH_PATTERN)&&(crossTabMultiSelect.deselectAllGroupMembers(),s=s.parentNode,$(s)&&(t=s.identify(),localContext.state.inDesignView))){if(t.startsWith("measureBucketDrill_")){var a=o.exec(t)[0],r=o.exec(t)[0];return void(AdHocCrosstab.isOlapMode()?AdHocCrosstab.drillOLAP(a,r):AdHocCrosstab.drill(a,r))}t.startsWith("measureBucketNoDrillParentChild_")&&dialogs.systemConfirm.show(adhocDesigner.getMessage("ADH_1213_DRILLTHROUGH_NOT_SUPPORTED_PARENT_CHILD",15e3))}},AdHocCrosstab.contextMenuHandler=function(e){var t,s,o,a=e.element(),r=a.identify();if(matchAny(a,[AdHocCrosstab.COLUMN_GROUP_MEMBER_PATTERN,AdHocCrosstab.ROW_GROUP_MEMBER_PATTERN],!0))a&&(designerBase.isObjectInSelection({id:r},"id")||crossTabMultiSelect.selectXtabGroupMember(a,e),adhocDesigner.showDynamicMenu(e,designerBase.MEMBER_GROUP_MENU_LEVEL));else if(matchAny(a,[AdHocCrosstab.GROUP_LEVEL_PATTERN],!1)){for(;$(a).hasClassName("dummy");)a=a.nextSiblings()[0];r=a.identify(),o=r.startsWith("rowGroup"),t=parseInt(AdHocCrosstab.ENDS_WITH_A_NUMBER_REGEX.exec(r)[0]);var n=localContext.state,i=o?"row":"column",d=a.readAttribute("data-dimension"),l=_.indexOf(n.getDimensions(i),n.getDimension(d,i));$(a)&&(s={id:(o?"rowGroup_":"colGroup_")+t,name:a.readAttribute("data-level"),level:a.readAttribute("data-level"),dimensionId:d,expandable:"true"===a.readAttribute("data-expanable"),axis:i,isMeasure:d===adhocDesigner.MEASURES,groupIndex:AdHocCrosstab.isOlapMode()?l:t,index:t,sorting:a.readAttribute("data-sorting")},s.dimensionId!==AdHocCrosstab.NULL_DIMENSION&&(crossTabMultiSelect.selectXtabGroupLabel(s),s.isMeasure?AdHocCrosstab.showCrosstabMenu(e,localContext[o?"MEASURES_DIMENSION_ROW_MENU_CONTEXT":"MEASURES_DIMENSION_COLUMN_MENU_CONTEXT"]):AdHocCrosstab.showCrosstabMenu(e,designerBase[o?"ROW_GROUP_MENU_LEVEL":"COLUMN_GROUP_MENU_LEVEL"])))}else if(matchAny(a,[AdHocCrosstab.MEASURE_PATTERN],!1)){for(;$(a).hasClassName("dummy");)a=a.nextSiblings()[0];t=parseInt(AdHocCrosstab.ENDS_WITH_A_NUMBER_REGEX.exec(r)[0]),o=r.startsWith("rowGroup");var c=AdHocCrosstab.getRefinedMeasuresFromState(),E=c.length,u=t%E,A=c[u].fieldName;$(a)&&(s={id:(o?"rowGroup_":"colGroup_")+t,name:A,level:A,dimensionId:adhocDesigner.MEASURES,expandable:"true"===a.readAttribute("data-expanable"),axis:o?"row":"column",isMeasure:!0,index:u,path:a.readAttribute("data-path"),isInner:a.hasClassName("inner"),sorting:a.readAttribute("data-sorting")},crossTabMultiSelect.selectXtabGroupLabel(s),AdHocCrosstab.showCrosstabMenu(e,localContext[o?"MEASURE_ROW_MENU_CONTEXT":"MEASURE_COLUMN_MENU_CONTEXT"]))}},AdHocCrosstab.lmHandlersMap={addItems:function(e,t,s){var o=_.map(e,function(e){return e.extra.dimensionId});AdHocCrosstab.insertDimensionInAxisWithChild({dim:e[0].extra.isMeasure?o.slice(0,1):o,axis:s,pos:t,child:_.pluck(e,"id"),hierarchyName:e[0].extra.hierarchyName})},measureReorder:function(e,t){AdHocCrosstab.moveMeasure(e,t)},column:{addItem:function(e,t,s,o,a,r,n){AdHocCrosstab.insertDimensionInAxisWithChild({dim:e,axis:"column",pos:t,child:s,measure_pos:o,isMeasure:a,uri:r,hierarchyName:n})},removeItem:function(e,t){e.isMeasure?AdHocCrosstab.removeMeasure(t):AdHocCrosstab.hideColumnLevel(e.dimensionId,e.level)},moveItem:function(e,t,s){AdHocCrosstab.moveDimension(e,"column",s)},switchItem:function(e,t,s){AdHocCrosstab.moveDimension(e,"column",s)},contextMenu:function(e,t){AdHocCrosstab.selectFromDisplayManager(t.targetEvent,t.extra,designerBase.COLUMN_GROUP_MENU_LEVEL),AdHocCrosstab.showCrosstabMenu(t.targetEvent,localContext.DISPLAY_MANAGER_COLUMN_CONTEXT)}},row:{addItem:function(e,t,s,o,a,r,n){AdHocCrosstab.insertDimensionInAxisWithChild({dim:e,axis:"row",pos:t,child:s,measure_pos:o,isMeasure:a,uri:r,hierarchyName:n})},removeItem:function(e,t){e.isMeasure?AdHocCrosstab.removeMeasure(t):AdHocCrosstab.hideRowLevel(e.dimensionId,e.level)},moveItem:function(e,t,s){AdHocCrosstab.moveDimension(e,"row",s)},switchItem:function(e,t,s){AdHocCrosstab.moveDimension(e,"row",s)},contextMenu:function(e,t){AdHocCrosstab.selectFromDisplayManager(t.targetEvent,t.extra,designerBase.ROW_GROUP_MENU_LEVEL),AdHocCrosstab.showCrosstabMenu(t.targetEvent,localContext.DISPLAY_MANAGER_ROW_CONTEXT)}}},AdHocCrosstab.treeMenuHandler=function(e){var t,s=e.memo.node;"dimensionsTree"===s.treeId?t=s.isParent()?adhocDesigner.DIMENSION_TREE_DIMENSION_CONTEXT:adhocDesigner.DIMENSION_TREE_LEVEL_CONTEXT:"measuresTree"===s.treeId&&(t=s.isParent()?adhocDesigner.MEASURE_TREE_GROUP_CONTEXT:adhocDesigner.MEASURE_TREE_CONTEXT),adhocDesigner.showDynamicMenu(e.memo.targetEvent,t,null)},AdHocCrosstab.selectFromDisplayManager=function(e,t,s){designerBase.unSelectAll();var o=adhocDesigner.isMultiSelect(e,s);selectionCategory.area=s;var a=adhocDesigner.isAlreadySelected(t);actionModel.setSelected([t]),adhocDesigner.addSelectedObject(e,t,o,a),Event.stop(e)};