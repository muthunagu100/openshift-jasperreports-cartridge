define(["require","home/view/ListView","home/util/cookie","underscore","text!home/template/expandableBlockTemplate.htm","home/view/ListView","bundle!HomeBundle"],function(e){var t=e("home/view/ListView"),i=e("home/util/cookie"),s=e("underscore"),o=e("text!home/template/expandableBlockTemplate.htm"),a=(e("home/view/ListView"),e("bundle!HomeBundle"),{COLLAPSED:"0",EXPANDED:"1"});return t.extend({template:o,events:{"click .resourceBlock-header":"toggleList"},listStateCookieName:function(){return this.stateKey+"State"},toggleList:function(){var e=this.$(".buttonIconToggle"),t=this.$block;t.is(":visible")?(e.removeClass("isOpen"),e.addClass("isClosed"),t.hide(),i.set(this.listStateCookieName(),a.COLLAPSED)):(e.removeClass("isClosed"),e.addClass("isOpen"),t.show(),i.set(this.listStateCookieName(),a.EXPANDED))},initialize:function(e){this.$block=e.$block,this.title=e.title,this.expandedAtStart=e.expandedAtStart,this.stateKey=e.stateKey},dataToRender:function(){var e,t=!0,o=!s.isUndefined(this.expandedAtStart)&&this.expandedAtStart;return o||(e=i.get(this.listStateCookieName()),t=e!==a.COLLAPSED),{isExpanded:t,title:this.title}},render:function(){var e=this.dataToRender();return this.setElement(s.template(this.template,e)),this.$block&&(this.$el.append(this.$block),e.isExpanded?this.$block.show():this.$block.hide()),this}})});