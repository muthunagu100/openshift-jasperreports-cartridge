var SelectFileDialog=function(e){this._dom=$("selectFile").cloneNode(!0),this.selectedURI=null,this.selectedFileClickSelect=null,this.idSuffix=e.idSuffix,this.title=this._dom.select("div.title")[0],this.filePath=this._dom.select("#filePath")[0],this.selectBtn=this._dom.select("#selectFileBtnSelect")[0],this.cancelBtn=this._dom.select("#selectFileBtnCancel")[0],this.fromLocalRadio=this._dom.select("#fromLocalRadio")[0],this.fromRepoRadio=this._dom.select("#fromRepoRadio")[0],this.fromLocalRadioLabel=this._dom.select("label[for='fromLocalRadio']")[0],this.fromRepoRadioLabel=this._dom.select("label[for='fromRepoRadio']")[0],this.treeLocationId="addFileResourceTreeRepoLocation",this.treeDom=this._dom.select("#"+this.treeLocationId)[0],this.treeDom.writeAttribute("id",this.treeLocationId+this.idSuffix),this.treeLocationId+=this.idSuffix,[this._dom,this.filePath,this.selectBtn,this.cancelBtn,this.fromLocalRadio,this.fromRepoRadio].each(function(e){this._fixAttribute(e)},this),[this.fromLocalRadioLabel,this.fromRepoRadioLabel].each(function(e){this._fixAttribute(e,"for")},this),this.renderDialog()};SelectFileDialog.addMethod("_fixAttribute",function(e,t){var i=e.readAttribute(t?t:"id");e.writeAttribute(t?t:"id",i+this.idSuffix)}),SelectFileDialog.addMethod("_dialogClickHandler",function(e){var t=e.element();return matchAny(t,["button#selectFileBtnSelect"+this.idSuffix],!0)?(e.stop(),void this.selectedFileClickSelect()):matchAny(t,["button#selectFileBtnCancel"+this.idSuffix],!0)?(e.stop(),void this.hide()):(matchAny(t,["#fromLocalRadio"+this.idSuffix,"label[for='fromLocalRadio"+this.idSuffix+"'] > span"],!0)?domain.wizard.fromLocalHandler(this):matchAny(t,["#fromRepoRadio"+this.idSuffix,"label[for='fromRepoRadio"+this.idSuffix+"'] > span"],!0)&&domain.wizard.fromRepoHandler(this),void this.refreshSelectBtn())}),SelectFileDialog.addMethod("_dialogTreeClickHandler",function(){domain.wizard.fromRepoHandler(this)}),SelectFileDialog.addMethod("refreshSelectBtn",function(){function e(e){e.selectBtn.disabled&&domain.enableButton(e.selectBtn,!0)}function t(e){e.selectBtn.disabled||domain.enableButton(e.selectBtn,!1)}"local"===this.mode?this.filePath.getValue().length>0?e(this):t(this):this.tree.getSelectedNode()&&this.tree.getSelectedNode().param.type!=this.tree.getSelectedNode().FOLDER_TYPE_NAME?(this.selectedURI=this.tree.getSelectedNode().param.uri,e(this)):t(this)}),SelectFileDialog.addMethod("renderDialog",function(){document.body.insert(this._dom),this._dom.observe("click",this._dialogClickHandler.bindAsEventListener(this)),this.filePath.observe("change",this.refreshSelectBtn.bindAsEventListener(this))}),SelectFileDialog.addMethod("show",function(){this.refreshSelectBtn(),dialogs.popup.show(this._dom,!0)}),SelectFileDialog.addMethod("hide",function(){dialogs.popup.hide(this._dom)});