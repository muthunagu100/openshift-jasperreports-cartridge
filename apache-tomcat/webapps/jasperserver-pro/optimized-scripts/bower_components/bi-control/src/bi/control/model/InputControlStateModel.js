define(["require","exports","module","underscore","logger","common/model/BaseModel","../collection/InputControlOptionCollection"],function(t,e,i){var o=t("underscore"),n=t("logger").register(i),s=t("common/model/BaseModel"),l=t("../collection/InputControlOptionCollection");return s.extend({defaults:{id:void 0,value:void 0,options:void 0,uri:void 0,error:void 0},initialize:function(){s.prototype.initialize.apply(this,arguments),this.isValue=o.isUndefined(this.get("options")),this.options=new l(this.get("options")||[]),this.on("change:options",o.bind(function(){this.options.reset(this.get("options")||[])},this)),this.on("all",n.debug,n)},changeState:function(t){this.isValue?this.set("value",t):(t=o.isArray(t)?t:[t],this.options.each(function(e){e.set("selected",o.contains(t,e.get("value")),{silent:!0})}),this.options.trigger("change:selected"),this.options.trigger("change"))},getData:function(){return this.isValue?[this.get("value")]:o.compact(this.options.map(function(t){return t.get("selected")?t.get("value"):!1}))}})});