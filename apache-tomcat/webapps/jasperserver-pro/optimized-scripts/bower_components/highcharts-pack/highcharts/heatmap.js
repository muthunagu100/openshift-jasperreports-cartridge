!function(t,e){"function"==typeof define&&define.amd?define(["highcharts"],t):t(e.Highcharts)}(function(t,e){function i(t,e){var o,s,r=t&&t.length;return r?(o=["plotX","plotY"][e%2],t.sort(function(t,e){return t[o]-e[o]}),s=Math.floor(r/2),{point:t[s],left:i(t.slice(0,s),e+1),right:i(t.slice(s+1),e+1)}):void 0}function o(t,e,i){var s,r,a,n,l,h=e.point,p=["plotX","plotY"][i%2],c=h;return h.dist=Math.pow(t.plotX-h.plotX,2)+Math.pow(t.plotY-h.plotY,2),s=t[p]-h[p],r=0>s?"left":"right",e[r]&&(n=o(t,e[r],i+1),c=n.dist<c.dist?n:h,a=0>s?"right":"left",e[a]&&Math.abs(s)<c.dist&&(l=o(t,e[a],i+1),c=l.dist<c.dist?l:c)),c}var e,s=t.Axis,r=t.Chart,a=t.Color,n=t.Legend,l=t.LegendSymbolMixin,h=t.Series,p=t.SVGRenderer,c=t.getOptions(),d=t.each,f=t.extend,u=t.extendClass,g=t.merge,x=t.pick,m=t.numberFormat,y=t.seriesTypes,b=t.wrap,v=function(){},C=t.ColorAxis=function(){this.isColorAxis=!0,this.init.apply(this,arguments)};f(C.prototype,s.prototype),f(C.prototype,{defaultColorAxisOptions:{lineWidth:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(t,e){var i,o="vertical"!==t.options.legend.layout;i=g(this.defaultColorAxisOptions,{side:o?2:1,reversed:!o},e,{isX:o,opposite:!o,showEmpty:!1,title:null,isColor:!0}),s.prototype.init.call(this,t,i),e.dataClasses&&this.initDataClasses(e),this.initStops(e),this.isXAxis=!0,this.horiz=o,this.zoomEnabled=!1},tweenColors:function(t,e,i){var o=1!==e.rgba[3]||1!==t.rgba[3];return(o?"rgba(":"rgb(")+Math.round(e.rgba[0]+(t.rgba[0]-e.rgba[0])*(1-i))+","+Math.round(e.rgba[1]+(t.rgba[1]-e.rgba[1])*(1-i))+","+Math.round(e.rgba[2]+(t.rgba[2]-e.rgba[2])*(1-i))+(o?","+(e.rgba[3]+(t.rgba[3]-e.rgba[3])*(1-i)):"")+")"},initDataClasses:function(t){var e,i=this,o=this.chart,s=0,r=this.options;this.dataClasses=e=[],this.legendItems=[],d(t.dataClasses,function(n,l){var h;n=g(n),e.push(n),n.color||("category"===r.dataClassColor?(h=o.options.colors,n.color=h[s++],s===h.length&&(s=0)):n.color=i.tweenColors(a(r.minColor),a(r.maxColor),l/(t.dataClasses.length-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],d(this.stops,function(t){t.color=a(t[1])})},setOptions:function(t){s.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker,this.coll="colorAxis"},setAxisSize:function(){var t,e,i,o,s=this.legendSymbol,r=this.chart;s&&(this.left=t=s.attr("x"),this.top=e=s.attr("y"),this.width=i=s.attr("width"),this.height=o=s.attr("height"),this.right=r.chartWidth-t-i,this.bottom=r.chartHeight-e-o,this.len=this.horiz?i:o,this.pos=this.horiz?t:e)},toColor:function(t,i){var o,s,r,a,n,l,h=this.stops,p=this.dataClasses;if(p){for(l=p.length;l--;)if(n=p[l],s=n.from,r=n.to,(s===e||t>=s)&&(r===e||r>=t)){a=n.color,i&&(i.dataClass=l);break}}else{for(this.isLog&&(t=this.val2lin(t)),o=1-(this.max-t)/(this.max-this.min||1),l=h.length;l--&&!(o>h[l][0]););s=h[l]||h[l+1],r=h[l+1]||s,o=1-(r[0]-o)/(r[0]-s[0]||1),a=this.tweenColors(s.color,r.color,o)}return a},getOffset:function(){var t=this.legendGroup,e=this.chart.axisOffset[this.side];t&&(s.prototype.getOffset.call(this),this.axisGroup.parentGroup||(this.axisGroup.add(t),this.gridGroup.add(t),this.labelGroup.add(t),this.added=!0),this.chart.axisOffset[this.side]=e)},setLegendColor:function(){var t,e=this.horiz,i=this.options;t=e?[0,0,1,0]:[0,0,0,1],this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:i.stops||[[0,i.minColor],[1,i.maxColor]]}},drawLegendSymbol:function(t,e){var i,o=t.padding,s=t.options,r=this.horiz,a=x(s.symbolWidth,r?200:12),n=x(s.symbolHeight,r?12:200),l=x(s.labelPadding,r?16:30),h=x(s.itemDistance,10);this.setLegendColor(),e.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,a,n).attr({zIndex:1}).add(e.legendGroup),i=e.legendSymbol.getBBox(),this.legendItemWidth=a+o+(r?h:l),this.legendItemHeight=n+o+(r?l:0)},setState:v,visible:!0,setVisible:v,getSeriesExtremes:function(){var t;this.series.length&&(t=this.series[0],this.dataMin=t.valueMin,this.dataMax=t.valueMax)},drawCrosshair:function(t,e){var i,o=!this.cross,r=e&&e.plotX,a=e&&e.plotY,n=this.pos,l=this.len;e&&(i=this.toPixels(e.value),n>i?i=n-2:i>n+l&&(i=n+l+2),e.plotX=i,e.plotY=this.len-i,s.prototype.drawCrosshair.call(this,t,e),e.plotX=r,e.plotY=a,!o&&this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.labelGroup))},getPlotLinePath:function(t,e,i,o,r){return r?this.horiz?["M",r-4,this.top-6,"L",r+4,this.top-6,r,this.top,"Z"]:["M",this.left,r,"L",this.left-6,r+6,this.left-6,r-6,"Z"]:s.prototype.getPlotLinePath.call(this,t,e,i,o)},update:function(t,e){d(this.series,function(t){t.isDirtyData=!0}),s.prototype.update.call(this,t,e),this.legendItem&&(this.setLegendColor(),this.chart.legend.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var t,i=this,o=this.chart,s=this.legendItems,r=o.options.legend,a=r.valueDecimals,n=r.valueSuffix||"";return s.length||d(this.dataClasses,function(r,h){var p=!0,c=r.from,u=r.to;t="",c===e?t="< ":u===e&&(t="> "),c!==e&&(t+=m(c,a)+n),c!==e&&u!==e&&(t+=" - "),u!==e&&(t+=m(u,a)+n),s.push(f({chart:o,name:t,options:{},drawLegendSymbol:l.drawRectangle,visible:!0,setState:v,setVisible:function(){p=this.visible=!p,d(i.series,function(t){d(t.points,function(t){t.dataClass===h&&t.setVisible(p)})}),o.legend.colorizeItem(this,p)}},r))}),s},name:""}),b(r.prototype,"getAxes",function(t){var e=this.options,i=e.colorAxis;t.call(this),this.colorAxis=[],i&&(t=new C(this,i))}),b(n.prototype,"getAllItems",function(t){var e=[],i=this.chart.colorAxis[0];return i&&(i.options.dataClasses?e=e.concat(i.getDataClassLegendSymbols()):e.push(i),d(i.series,function(t){t.options.showInLegend=!1})),e.concat(t.call(this))});var w={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:v,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var t=this,e=this.options.nullColor,i=this.colorAxis,o=this.colorKey;d(this.data,function(s){var r,a=s[o];r=null===a?e:i&&void 0!==a?i.toColor(a,s):s.color||t.color,r&&(s.color=r)})}};return b(p.prototype,"buildText",function(t,e){var i=e.styles&&e.styles.HcTextStroke;t.call(this,e),i&&e.applyTextStroke&&e.applyTextStroke(i)}),p.prototype.Element.prototype.applyTextStroke=function(t){var e,i,o=this.element;t=t.split(" "),e=o.getElementsByTagName("tspan"),i=o.firstChild,this.ySetter=this.xSetter,d([].slice.call(e),function(e,s){var r;0===s&&(e.setAttribute("x",o.getAttribute("x")),null!==(s=o.getAttribute("y"))&&e.setAttribute("y",s)),r=e.cloneNode(1),r.setAttribute("stroke",t[1]),r.setAttribute("stroke-width",t[0]),r.setAttribute("stroke-linejoin","round"),o.insertBefore(r,i)})},c.plotOptions.heatmap=g(c.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},verticalAlign:"middle",crop:!1,overflow:!1,style:{color:"white",fontWeight:"bold",HcTextStroke:"1px rgba(0,0,0,0.5)"}},marker:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{brightness:.2}}}),y.heatmap=u(y.scatter,g(w,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,supportsDrilldown:!0,getExtremesFromAll:!0,init:function(){y.scatter.prototype.init.apply(this,arguments),this.pointRange=this.options.colsize||1,this.yAxis.axisPointRange=this.options.rowsize||1,this.checkTooltipStyleElement()},checkTooltipStyleElement:function(){var t=jQuery(this.chart.container),e=t.find("#jasper_highcharts_css");this.chart.options.chart.isHeatMapTimeSeriesChart?e.length||this.addTooltipStyleElement():e.length&&e.remove()},addTooltipStyleElement:function(){var t=jQuery(this.chart.container),e=jQuery("<style type='text/css'>.highcharts-tooltip>span {background: rgba(255,255,255,0.85);border: 1px solid silver;border-radius: 3px;box-shadow: 1px 1px 2px #888;padding: 8px;z-index: 2;}.highcharts-button>span {background: rgba(255,255,255,0.85);border: 1px solid silver;border-radius: 3px;padding: 5px;z-index: 2;cursor: pointer;}.highcharts-button>span:hover {background: -moz-linear-gradient(top, #ffffff 0%, #aaccff 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#aaccff));background: -webkit-linear-gradient(top, #ffffff 0%,#aaccff 100%);background: -o-linear-gradient(top, #ffffff 0%,#aaccff 100%);background: -ms-linear-gradient(top, #ffffff 0%,#aaccff 100%);background: linear-gradient(to bottom, #ffffff 0%,#aaccff 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#aaccff',GradientType=0 );}</style>");e.id="jasper_highcharts_css",t.append(e)},translate:function(){var t=this,e=t.options,i=t.xAxis,o=t.yAxis;t.generatePoints(),d(t.points,function(t){var s=(e.colsize||1)/2,r=(e.rowsize||1)/2,a=Math.round(i.len-i.translate(t.x-s,0,1,0,1)),n=Math.round(i.len-i.translate(t.x+s,0,1,0,1)),l=Math.round(o.translate(t.y-r,0,1,0,1)),h=Math.round(o.translate(t.y+r,0,1,0,1));t.plotX=(a+n)/2,t.plotY=(l+h)/2,t.shapeType="rect",t.shapeArgs={x:Math.min(a,n),y:Math.min(l,h),width:Math.abs(n-a),height:Math.abs(h-l)}}),t.translateColors()},drawPoints:function(){var e;this.chart.renderer.forExport||!this.chart.options.chart.isHeatMapTimeSeriesChart?y.column.prototype.drawPoints.call(this):(e=this.getContext())?(e.canvas.height=this.chart.renderer.plotBox.height,e.canvas.width=this.chart.renderer.plotBox.width,t.each(this.points,function(t){var i,o=t.plotY;void 0===o||isNaN(o)||null===t.y||(i=t.shapeArgs,e.fillStyle=t.pointAttr[""].fill,e.fillRect(i.x,i.y,i.width,i.height))})):this.chart.showLoading("Your browser doesn't support HTML5 canvas, <br>please use a modern browser")},animate:v,getBox:v,drawLegendSymbol:l.drawRectangle,getExtremes:function(){h.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,h.prototype.getExtremes.call(this)},getContext:function(){var t;return this.ctx||(t=document.createElement("canvas"),t.setAttribute("width",this.chart.plotWidth),t.setAttribute("height",this.chart.plotHeight),t.style.position="absolute",t.style.left=this.group.translateX+"px",t.style.top=this.group.translateY+"px",t.style.zIndex=0,t.style.cursor="crosshair",this.chart.container.appendChild(t),t.getContext&&(this.ctx=t.getContext("2d"))),this.ctx},setTooltipPoints:function(){var t=this;this.tree=null,setTimeout(function(){t.tree=i(t.points,0)})},getNearest:function(t){return this.tree?o(t,this.tree,0):void 0}})),t.wrap(t.Pointer.prototype,"runPointActions",function(e,i){var o=this.chart;e.call(this,i),this.chart.options.chart.isHeatMapTimeSeriesChart&&t.each(o.series,function(t){var e;t.getNearest&&(e=t.getNearest({plotX:i.chartX-o.plotLeft,plotY:i.chartY-o.plotTop}),e&&e.onMouseOver(i))})}),t},this);