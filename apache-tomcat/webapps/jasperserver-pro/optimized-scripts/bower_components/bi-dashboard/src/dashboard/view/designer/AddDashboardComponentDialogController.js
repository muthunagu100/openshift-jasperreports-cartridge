define(["require","underscore","dashboard/factory/addDashboardComponentDialogTitleFactory","dashboard/factory/addDashboardComponentDialogTemplateFactory","common/component/dialog/Dialog","common/view/ViewWithRivets","bundle!DashboardBundle","bundle!CommonBundle"],function(o){function e(o,e){this.model=o,e&&e.overElement&&(this.lastHighestIndex=i.highestIndex,i.highestIndex=parseInt(e.overElement.css("zIndex"))+1),this.dialog=new i({modal:!0,model:o,additionalCssClasses:"addDashboardComponentDialog",title:t(o),content:new n({template:a(o),model:o,i18n:d}),buttons:[{label:l[e&&e.okButtonLabel?e.okButtonLabel:"button.ok"],action:"ok",primary:!0,triggerOnKeyCode:13},{label:l["button.cancel"],action:"cancel",primary:!1,triggerOnKeyCode:27}]}),this.dialog.listenTo(this.dialog.content.model,"validated:valid",function(){this.enableButton("ok")}),this.dialog.listenTo(this.dialog.content.model,"validated:invalid",function(){this.disableButton("ok")}),this.dialog.on("dialog:visible",function(){var o=this.$el.find("input"),e=o.val();o.focus().val("").val(e)}),e&&e.okButtonDisabled&&this.dialog.disableButton("ok")}var t=(o("underscore"),o("dashboard/factory/addDashboardComponentDialogTitleFactory")),a=o("dashboard/factory/addDashboardComponentDialogTemplateFactory"),i=o("common/component/dialog/Dialog"),n=o("common/view/ViewWithRivets"),d=o("bundle!DashboardBundle"),l=o("bundle!CommonBundle");return e.prototype.remove=function(){this.dialog.off("dialog:visible"),this.dialog.remove()},e.prototype.closeAndRemove=function(){i.resetHighestIndex(this.lastHighestIndex),this.dialog.close(),this.remove()},e});