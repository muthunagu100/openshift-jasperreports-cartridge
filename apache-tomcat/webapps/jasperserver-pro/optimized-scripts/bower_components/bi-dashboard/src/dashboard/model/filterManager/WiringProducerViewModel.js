define(["require","backbone","underscore","./../DashboardWiringModel","common/validation/ValidationErrorMessage","./WiringConsumerViewModel","backbone.validation","../../collection/filterManager/WiringConsumerViewModelCollection"],function(e){var n=e("backbone"),i=e("underscore"),o=(e("./../DashboardWiringModel"),e("common/validation/ValidationErrorMessage")),r=e("./WiringConsumerViewModel"),a=e("backbone.validation"),t=e("../../collection/filterManager/WiringConsumerViewModelCollection"),d=n.Model.extend(i.extend({},a.mixin,{defaults:{id:void 0,name:void 0,parameter:void 0},validation:{name:[{required:!0,msg:new o("dashboard.filterManager.error.parameter.name.required")},{fn:function(e,n,o){return i.isUndefined(o.id)?this.collection.find(function(n){return n.get("name")==e&&n.get("id")!==o.id}):void 0},msg:new o("dashboard.filterManager.error.parameter.name.duplication")}]},initialize:function(e,n){n||(n={}),this.consumers=n.consumers||new t([]),this.component=n.component},isValid:function(e){return a.mixin.isValid.call(this,e)&&this.consumers.isValid(e)},isHidden:function(){return!this.component.isVisible()}}),{createFromDashboardWiringModel:function(e,n){var i=new t;return i.add(e.consumers.map(function(e){var o=e.get("consumer").split(":"),a=n.get(o[0]);return new r({id:o[0],parameter:o[1],name:a.get("name")},{component:a,collection:i})})),new d({id:e.component.get("id"),name:e.component.get("label"),parameter:e.get("name")},{component:e.component,consumers:i})}});return d});