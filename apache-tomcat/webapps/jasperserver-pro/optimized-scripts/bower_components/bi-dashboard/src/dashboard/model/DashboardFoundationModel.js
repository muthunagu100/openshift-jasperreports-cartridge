define(["require","backbone","underscore","jquery","../enum/dashboardComponentTypes","../enum/dashboardWiringStandardIds","../collection/DashboardWiringCollection","../collection/DashboardComponentCollection"],function(n){var i=n("backbone"),t=n("underscore"),e=n("jquery"),o=n("../enum/dashboardComponentTypes"),s=n("../enum/dashboardWiringStandardIds"),r=n("../collection/DashboardWiringCollection"),h=n("../collection/DashboardComponentCollection");return i.Model.extend({defaults:{id:void 0,description:void 0,wiring:void 0,layout:void 0,components:void 0},initialize:function(){this.components=new h,this.wiring=new r,this.listenTo(this.components,"add",t.bind(function(n){this.trigger("addComponent",n,this),n.acceptWiringVisitor(this.wiring)},this)),this.listenTo(this.components,"remove",t.bind(function(n){this.trigger("removeComponent",n,this),n.get("type")===o.INPUT_CONTROL?(this.wiring.unregister(n),n.getParent()&&(n.getParent().getChildren().length?n.getParent().notify(!0):this.components.remove(n.getParent()))):n.get("type")===o.FILTER_GROUP?(this.components.remove(n.getChildren()),n.notify(!0),this.wiring.unregister(n)):this.wiring.unregister(n)},this)),this.listenTo(this.components,"change",t.bind(function(n){var i=n.changedAttributes();("width"in i||"height"in i)&&this.trigger("resizeComponent",n,this),("x"in i||"y"in i)&&this.trigger("moveComponent",n,this),"selected"in i&&this.trigger("selectComponent",n,this),t.contains(t.values(o),n.get("type"))&&this.trigger("changeProperties",n,this)},this)),this.listenTo(this.components,"edit",t.bind(function(n){this.trigger("editComponent",n,this)},this)),this.listenTo(this.components,"changedControlProperties",t.bind(function(n){this.trigger("changedControlProperties",n,this)},this)),this.listenTo(this.wiring,"add change remove",t.bind(function(n){this.trigger("changeWiring",n,this)},this))},startLoadingSequence:function(){var n=this.wiring,i=this,t=this.components.getDashboardPropertiesComponent();e.when.apply(null,this.components.reduce(function(n,i){return i.componentInitializedDfd&&n.push(i.componentInitializedDfd),n},[])).then(function(){e.when.apply(null,i.components.reduce(function(n,i){return i.paramsDfd&&n.push(i.paramsDfd),n},[])).then(function(){n.initialized=!0,n.trigger("init")}),t.trigger(s.INIT_SIGNAL,{}),n.enableAutowiring()})},hasVisualComponents:function(){return this.components.any(function(n){return n.isVisible()})}})});