define(["require","../../base/componentViewTrait/inputControlTrait","dashboard/dashboardMessageBus","dashboard/enum/dashboardMessageBusEvents","../../../collection/ReportsParametersCollection","underscore","jquery"],function(e){var t=e("../../base/componentViewTrait/inputControlTrait"),n=e("dashboard/dashboardMessageBus"),o=e("dashboard/enum/dashboardMessageBusEvents"),i=e("../../../collection/ReportsParametersCollection").instance,s=e("underscore"),r=e("jquery");return s.extend({},t,{_onViewInitialize:function(){var e=this;t._onViewInitialize.apply(this,arguments),this.listenTo(n,o.TOGGLE_PREVIEW_MODE,function(t){if(!t)for(var n in e.component.controlViews)"singleSelectRadio"===e.component.controlViews[n].model.get("type")&&e.component.controlViews[n].updateOptionsSelection()})},_initComponent:function(){var e=this;t._initComponent.apply(this,arguments),this.listenTo(this.component,"controls:rendered",this._addOverlay),this.listenTo(i,"change",function(t){t.id===e.model.getOwnerUri()&&e.reset()})},_addOverlay:function(){this.$overlay=r("<div/>",{"class":"overlay"}),this.$el.prepend(this.$overlay)},_onComponentPropertiesChange:function(){var e=this.model.changedAttributes(),t=this.inputControlCollection.models[0];e&&"label"in e&&(t&&t.set({label:this.model.get("label")}),this.component.render())},reset:function(){var e=this,n=arguments;this.inputControlCollection.models&&this.inputControlCollection.models.length>0?t.reset.apply(this,arguments):i.getReportParameters(this.model.getOwnerUri()).done(function(o){var i=s.findWhere(o,{id:e.model.getOwnerParameterName()});if(i){var r=s.extend({},i,{label:e.model.get("label")||i.label,slaveDependencies:[],state:{}});e.inputControlCollection.reset([r])}t.reset.apply(e,n)}).fail(function(){t.reset.apply(e,n)})}})});