define(["require","underscore","./BaseAutowiringStrategy","../../enum/dashboardComponentTypes","../../enum/dashboardWiringStandardIds"],function(e){function r(e,r,n){var u=r.reduce(function(e,r){return r.component.get("ownerResourceId")===n.resource.id&&e.push(r),e},[]),t=n.get("parameters")||[];o.each(u,function(e){var u=o.find(t,function(r){return e.component.resource.id===r.uri});e.consumers.add({consumer:n.id+":"+u.id}),r.get(e.component.get("parentId")+":"+c.REFRESH_SIGNAL).consumers.add({consumer:n.id+":"+c.APPLY_SLOT})})}function n(e,r,n){var u=r.find(function(e){return e.component.resource&&e.component.resource.id===n.resource.id}),t=n.collection.find(function(e){return e.resource&&e.resource.id===n.get("ownerResourceId")});t&&o.each(t.get("parameters"),function(e){n.getOwnerParameterName()===e.id&&(u.consumers.add({consumer:t.id+":"+e.id}),u.component.get("parentId")&&r.get(u.component.get("parentId")+":"+c.REFRESH_SIGNAL).consumers.add({consumer:t.id+":"+c.APPLY_SLOT}))})}var o=e("underscore"),u=e("./BaseAutowiringStrategy"),t=e("../../enum/dashboardComponentTypes"),c=e("../../enum/dashboardWiringStandardIds");return u.extend({autowire:function(e,o,u){o.resource&&o.resource.resource&&(o.resource.resource.type===t.REPORT||o.resource.resource.type===t.ADHOC_VIEW)&&r(this,e,o,u),o.resource&&o.resource.resource&&o.resource.resource.type===t.INPUT_CONTROL&&n(this,e,o,u)}})});