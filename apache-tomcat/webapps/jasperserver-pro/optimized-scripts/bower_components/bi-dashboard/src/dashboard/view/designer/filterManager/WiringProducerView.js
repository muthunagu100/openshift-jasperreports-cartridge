define(["require","common/view/ViewWithRivets","./WiringConsumerCollectionView","underscore","bundle!DashboardBundle","bundle!CommonBundle","../../../enum/dashboardComponentTypes","./WiringSelectConsumerView","../../../model/filterManager/WiringConsumerViewModel","./WiringRemoveConsumerView","text!../../../template/filterManager/wiringProducerTemplate.htm"],function(e){var o=e("common/view/ViewWithRivets"),n=e("./WiringConsumerCollectionView"),t=e("underscore"),i=e("bundle!DashboardBundle"),r=e("bundle!CommonBundle"),m=e("../../../enum/dashboardComponentTypes"),l=e("./WiringSelectConsumerView"),s=e("../../../model/filterManager/WiringConsumerViewModel"),d=e("./WiringRemoveConsumerView"),u=e("text!../../../template/filterManager/wiringProducerTemplate.htm");return o.extend({constructor:function(e){e.template=u,e.i18n=t.extend(r,i),o.prototype.constructor.call(this,e)},initialize:function(e){o.prototype.initialize.call(this,e),this.selectConsumersCollectionView=new n({collection:this.model.consumers,el:this.$(".selectConsumerColumn > .consumerTable > tbody"),modelView:l,modelViewOptions:{consumers:e.consumers}}),this.removeConsumersCollectionView=new n({collection:this.model.consumers,el:this.$(".removeConsumerColumn > .consumerTable > tbody"),modelView:d})},render:function(){return o.prototype.render.apply(this,arguments),this.selectConsumersCollectionView.render(),this.removeConsumersCollectionView.render(),this},checkNewProducerName:function(e,o){if(o.model.isValid(!0)){o.model.component.set("name",o.model.component.generateName(o.model.get("name")));var n=o.model.component.generateId();o.model.component.set("id",n),o.model.set({parameter:n,id:n})}},removeProducer:function(e,o){o.model.trigger("destroy",o.model,o.model.collection)},addConsumer:function(e,o){o.model.consumers.add(new s({},{collection:o.model.consumers}))},isValueModel:function(){return this.model.component.get("type")===m.VALUE},remove:function(){this.selectConsumersCollectionView.remove(),this.removeConsumersCollectionView.remove(),o.prototype.remove.apply(this,arguments)}})});