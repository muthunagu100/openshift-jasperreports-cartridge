define(["require","common/model/RepositoryResourceModel","backbone","common/enum/repositoryResourceTypes","dashboard/enum/repositoryFileTypes","base64","json3","underscore"],function(e){function t(e,t){return a.isUndefined(e)||(t&&(e=u.stringify(e)),e=c.encode(e)),e}function n(e,t){try{/[A-Za-z0-9+/=]/.test(e)&&(e=c.decode(e),t&&(e=u.parse(e)))}catch(n){}return e}var o=e("common/model/RepositoryResourceModel"),i=e("backbone"),s=e("common/enum/repositoryResourceTypes"),r=e("dashboard/enum/repositoryFileTypes"),c=e("base64"),u=e("json3"),a=e("underscore");return o.extend({type:s.FILE,stringifyContent:!0,validation:function(){var e=a.extend({},o.prototype.validation);return delete e.parentFolderUri,e}(),defaults:a.extend({type:r.UNSPECIFIED,content:void 0},o.prototype.defaults),initialize:function(){o.prototype.initialize.apply(this,arguments),this.content=n(this.get("content"),this.stringifyContent),this.on("change:content",function(){this.content=n(this.get("content"),this.stringifyContent)},this)},setContent:function(e){this.content=e,this.set("content",t(e,this.stringifyContent),{silent:!0})},fetchContent:function(e){e||(e={});var t=this;return i.ajax(a.defaults(e,{type:"GET",url:this.url()+"?expanded=false",success:function(e){t.setContent(e)}}))}})});