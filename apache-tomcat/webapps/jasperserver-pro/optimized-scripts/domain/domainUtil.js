define(["require","underscore","jrs.configs","text!./template/domainUsedResourcesTemplate.htm"],function(e){function s(e){return new RegExp(e.replace(".","\\.").replace("]","\\]").replace("[","\\[").replace("{0}","(\\S+)").replace("{1}","(\\S+)"),"g")}var r=e("underscore"),t=e("jrs.configs"),c=r.template(e("text!./template/domainUsedResourcesTemplate.htm"));return window.domainUtil={getUsedResourcesList:function(e,r){for(var t,c=s(r),n=[];t=c.exec(e);)n.push({field:t[1],resource:t[2]});return n},indexOfNoAccessMessage:function(e,s){return e.indexOf(s)},getUsedResourcesFormattedMessage:function(e,s,r){if(!e.length)return s;var n=r.ITEM_BEING_USED_BY_RESOURCE.split("{0}")[0],o=s.split(n)[0],i=o+c({contextPath:t.contextPath,usedResources:e,resourceLabel:r["resource.label"],fieldLabel:r["field.label"]});return this.indexOfNoAccessMessage(s,r.resourcesWithNoAccess)>-1&&(i+="<br/>"+r.resourcesWithNoAccess),i}},window.domainUtil});