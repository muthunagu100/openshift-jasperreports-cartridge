dd_joins.deleteJoinValidator={_DELETE_CALCFIELDS_TEMPLATE_ID:"calcFieldsForJoinConfirmMessage",_CALC_FIELDS_DETAILS_LINK_ID:"#calcFieldsForJoinsDetails",_DELETE_FILTERS_TEMPLATE_ID:"filtersForJoinConfirmMessage",_callback:null,_validateUnjoinedTableForCalcFields:null,_buildDataIslands:null,_getNotJoinedTablesAfterDeleting:null,_involvedFieldsIds:null,_involvedFieldsExpressionIds:null,init:function(i,n,e){dd_joins.deleteJoinValidator._init.bind(dd_joins.deleteJoinValidator,i,n,e)()},validate:function(i,n,e){dd_joins.deleteJoinValidator._validate.bind(dd_joins.deleteJoinValidator,i,n,e)()},_init:function(i,n,e){this._validateUnjoinedTableForCalcFields=i,this._buildDataIslands=n,this._getNotJoinedTablesAfterDeleting=e},_validate:function(i,n,e){this._callback=e;var t=this._findLostTable(i,n);t?this._validateUnjoinedTableForCalcFields(t,this._validationCallback.bind(this,i,n)):this._validateIfJoinFiledsUsedInfilters(i,n)},_validationCallback:function(i,n,e){return"success"===e?void this._validateIfJoinFiledsUsedInfilters(i,n):(this._involvedFieldsIds=e.involvedFieldsIds,this._involvedFieldsExpressionIds=e.involvedFieldsExpressionIds,void domain.confirmDialog.show(this._DELETE_CALCFIELDS_TEMPLATE_ID,this._validateIfJoinFiledsUsedInfilters.bind(this,i,n),this._onCancel.bind(this),this._showAffectedResources.bind(this)))},_validateIfJoinFiledsUsedInfilters:function(i,n){var e=this._getNotJoinedTablesAfterDeleting(i,n);e.first()?domain.confirmDialog.show(this._DELETE_FILTERS_TEMPLATE_ID,this._onOk.bind(this),this._onCancel.bind(this),this._showAffectedResources.bind(this)):this._onOk()},_onOk:function(){this._callback&&this._callback(this._involvedFieldsIds,this._involvedFieldsExpressionIds)},_onCancel:function(){},_showAffectedResources:function(i){return domain.elementClicked(i,this._CALC_FIELDS_DETAILS_LINK_ID)?(domain.detailsDialog.show(this._involvedFieldsExpressionIds),!0):void 0},_findLostTable:function(i,n){var e=this._buildDataIslands(i),t=this._buildDataIslands(i.without(n)),l=null;return e.each(function(i){if(i.each(function(i){var n=!1;if(t.each(function(e){e.each(function(e){i==e&&(n=!0)})}),!n)throw l=i,$break}),l)throw $break}),l}},dd_joins.createJoinValidator={_CREATE_COMPOSITE_KEY:"createCompositeKeyConfirmMessage",_callback:null,validate:function(i,n,e,t){dd_joins.createJoinValidator._validate.bind(dd_joins.createJoinValidator,i,n,e,t)()},_validate:function(i,n,e,t){this._callback=t;var l=i.parent.param.id,s=n.parent.param.id,a=!1;return e.each(function(i){var n=i.left.table.id===l||i.right.table.id===l,e=i.left.table.id===s||i.right.table.id===s;if(n&&e)throw a=!0,$break}),a?void domain.confirmDialog.show(this._CREATE_COMPOSITE_KEY,this._onOk.bind(this),this._onCancel.bind(this),null):void this._onOk()},_onOk:function(){this._callback&&this._callback()},_onCancel:function(){}};